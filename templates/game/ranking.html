{% extends 'game/base.html' %}
{% load number_filters %}

{% block title %}ë­í‚¹ - ìœ ë‹ˆì½˜ ë©”ì´ì»¤{% endblock %}

{% block content %}
<div class="ranking-page">
    
    <!-- ì˜¤ëŠ˜ì˜ ë­í‚¹ -->
    <section class="today-ranking">
        <h1>ğŸ† ì˜¤ëŠ˜ì˜ ë­í‚¹</h1>
        
        {% if today_ranking %}
        <table class="ranking-table">
            <thead>
                <tr>
                    <th>ìˆœìœ„</th>
                    <th>ë‹‰ë„¤ì„</th>
                    <th>ìˆ˜ìµë¥ </th>
                    <th>ìµœì¢… ìë³¸</th>
                </tr>
            </thead>
            <tbody>
                {% for session in today_ranking %}
                <tr class="{% if forloop.counter <= 3 %}top-rank{% endif %}">
                    <td class="rank">{{ forloop.counter }}</td>
                    <td class="nickname">{{ session.user.nickname }}</td>
                    <td class="profit {% if session.final_profit_rate >= 0 %}positive{% else %}negative{% endif %}">
                        {{ session.final_profit_rate|floatformat:1 }}%
                    </td>
                    <td class="capital">{{ session.current_capital|korean_currency }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        {% else %}
        <p class="empty-message">ì•„ì§ ì˜¤ëŠ˜ì˜ ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤.</p>
        {% endif %}
    </section>

    <!-- ëª…ì˜ˆì˜ ì „ë‹¹ -->
    <section class="hall-of-fame">
        <h2>ğŸ‘‘ ëª…ì˜ˆì˜ ì „ë‹¹ (ì—­ëŒ€ Top 10)</h2>
        
        {% if hall_of_fame %}
        <table class="ranking-table hall-of-fame-table">
            <thead>
                <tr>
                    <th>ìˆœìœ„</th>
                    <th>ë‹‰ë„¤ì„</th>
                    <th>ìˆ˜ìµë¥ </th>
                    <th>ìµœì¢… ìë³¸</th>
                    <th>ë‚ ì§œ</th>
                </tr>
            </thead>
            <tbody>
                {% for session in hall_of_fame %}
                <tr>
                    <td class="rank">{{ forloop.counter }}</td>
                    <td class="nickname">{{ session.user.nickname }}</td>
                    <td class="profit {% if session.final_profit_rate >= 0 %}positive{% else %}negative{% endif %}">{{ session.final_profit_rate|floatformat:1 }}%</td>
                    <td class="capital">{{ session.current_capital|korean_currency }}</td>
                    <td class="date">{{ session.created_at|date:"m/d" }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        {% else %}
        <p class="empty-message">ì•„ì§ ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤.</p>
        {% endif %}
    </section>

    <div class="btn-group">
        <a href="{% url 'game:main' %}" class="btn btn-primary">ğŸ  ë©”ì¸ìœ¼ë¡œ</a>
    </div>
</div>
{% endblock %}
